# ğŸ›ï¸ Architecture Globale - BlaizBot V1

> **Document** : 02/10 - Vue d'ensemble de l'architecture systÃ¨me
> **Statut** : ğŸŸ¡ En cours
> **Date** : 22 dÃ©cembre 2025

---

## ğŸ“ SchÃ©ma d'Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (Vercel)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Next.js 15 (App Router)                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   /login     â”‚  â”‚  /student/*  â”‚  â”‚  /teacher/* â”‚  â”‚  /admin/*   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Auth Page   â”‚  â”‚  Dashboard   â”‚  â”‚  Dashboard   â”‚  â”‚  CRUD UI    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚  Blaiz'bot   â”‚  â”‚  Courses     â”‚  â”‚  Settings   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚  Lab         â”‚  â”‚  Students    â”‚  â”‚  Stats      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                    Composants PartagÃ©s (shadcn/ui)                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Sidebar | DataTable | Modal | ChatInterface | Calendar | etc.      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         API Routes (/api/*)                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  /api/auth   â”‚  â”‚ /api/student â”‚  â”‚ /api/teacher â”‚  â”‚ /api/admin  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  NextAuth    â”‚  â”‚  Dashboard   â”‚  â”‚  Courses     â”‚  â”‚  CRUD       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  JWT         â”‚  â”‚  Exercises   â”‚  â”‚  Assignments â”‚  â”‚  Settings   â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                      /api/ai/* (Vercel AI SDK)                    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  chat (streaming) | generate/quiz | generate/summary | embeddings â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BACKEND SERVICES                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       Vercel Postgres        â”‚      â”‚         OpenAI API              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚     PostgreSQL         â”‚ â”‚      â”‚  â”‚   GPT-4o / GPT-4o-mini     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”‚      â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Users, Profiles       â”‚ â”‚      â”‚  â”‚   Chat Completions         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Courses, Exercises    â”‚ â”‚      â”‚  â”‚   Text Embeddings          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Grades, Progression   â”‚ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  â”‚  Messages, Events      â”‚ â”‚      â”‚                                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  Alternatives :                 â”‚   â”‚
â”‚  â”‚                              â”‚      â”‚  â€¢ Anthropic Claude            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â€¢ Google Gemini               â”‚   â”‚
â”‚  â”‚  â”‚     pgvector           â”‚ â”‚      â”‚  â€¢ Mistral AI                  â”‚   â”‚
â”‚  â”‚  â”‚  (Recherche RAG)       â”‚ â”‚      â”‚  â€¢ Ollama (local)              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                              â”‚                                            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”‚   Vercel Blob     â”‚ â”‚      â”‚       WebSocket (optionnel)         â”‚   â”‚
â”‚  â”‚  â”‚   (Fichiers PDF, etc.) â”‚ â”‚      â”‚   (WebSocket Messagerie)        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux de DonnÃ©es

### 1. Authentification
```
User â”€â”€â–º Login Page â”€â”€â–º POST /api/auth/login â”€â”€â–º NextAuth
                                                    â”‚
                               JWT Token â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          Stockage Cookie (httpOnly)
                                   â”‚
                                   â–¼
                         AccÃ¨s routes protÃ©gÃ©es
```

### 2. Chargement Dashboard Ã‰lÃ¨ve
```
Browser â”€â”€â–º GET /student/dashboard â”€â”€â–º Server Component
                                              â”‚
                                              â–¼
                                    GET /api/student/dashboard
                                              â”‚
                                              â–¼
                                    Prisma Query â†’ PostgreSQL
                                              â”‚
                                              â–¼
                                    Render UI avec donnÃ©es
```

### 3. Chat IA avec RAG
```
User Message â”€â”€â–º POST /api/ai/chat
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ RÃ©cupÃ©rer contexte â”‚
              â”‚ (sources cours)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Recherche pgvector â”‚
              â”‚ (similaritÃ©)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Construire prompt  â”‚
              â”‚ avec contexte      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ OpenAI API         â”‚
              â”‚ (streaming)        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              Server-Sent Events â”€â”€â–º UI Chat
```

### 4. Upload et Indexation de Fichier
```
File Upload â”€â”€â–º POST /api/teacher/courses/:id/files
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Upload Vercel Blob   â”‚
                   â”‚ Storage           â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Extraction texte  â”‚
                   â”‚ (PDF â†’ Text)      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ GÃ©nÃ©ration        â”‚
                   â”‚ Embeddings        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Stockage pgvector â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Structure des Dossiers

```
blaizbot-v1/
â”‚
â”œâ”€â”€ ğŸ“ .github/
â”‚   â”œâ”€â”€ ğŸ“ agents/                 # Agents IA Vibecoding
â”‚   â”‚   â”œâ”€â”€ orchestrator.md
â”‚   â”‚   â”œâ”€â”€ pm.md
â”‚   â”‚   â”œâ”€â”€ standards.md
â”‚   â”‚   â”œâ”€â”€ refactor.md
â”‚   â”‚   â”œâ”€â”€ docs.md
â”‚   â”‚   â”œâ”€â”€ review.md
â”‚   â”‚   â””â”€â”€ controller.md
â”‚   â””â”€â”€ ğŸ“ workflows/
â”‚       â””â”€â”€ ci.yml                 # GitHub Actions
â”‚
â”œâ”€â”€ ğŸ“ docs/
â”‚   â””â”€â”€ ğŸ“ PLAN_TECHNIQUE/         # Cette documentation
â”‚
â”œâ”€â”€ ğŸ“ prisma/
â”‚   â”œâ”€â”€ schema.prisma              # ModÃ¨le BDD
â”‚   â””â”€â”€ ğŸ“ migrations/
â”‚
â”œâ”€â”€ ğŸ“ public/
â”‚   â””â”€â”€ ğŸ“ assets/
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ app/                    # Next.js App Router
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ (auth)/             # Routes publiques
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ (dashboard)/        # Routes protÃ©gÃ©es
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ student/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx           # Dashboard
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ courses/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ exercises/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ assistant/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lab/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ messages/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ calendar/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ teacher/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx           # Dashboard
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subjects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ classes/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ students/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ courses/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ assignments/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ messages/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ calendar/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ admin/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx           # Dashboard/MatiÃ¨res
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ classes/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ teachers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ students/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ programs/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ statistics/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx         # Layout avec Sidebar
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/                # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [...nextauth]/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ student/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ teacher/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ admin/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ ai/
â”‚   â”‚   â”‚       â”œâ”€â”€ chat/
â”‚   â”‚   â”‚       â””â”€â”€ generate/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout.tsx             # Root Layout
â”‚   â”‚   â”œâ”€â”€ page.tsx               # Redirect â†’ /login
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/                 # shadcn/ui components
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ layout/             # Composants de structure
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ header.tsx
â”‚   â”‚   â”‚   â””â”€â”€ footer.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ features/           # Composants mÃ©tier
â”‚   â”‚       â”œâ”€â”€ ğŸ“ dashboard/
â”‚   â”‚       â”‚   â”œâ”€â”€ stats-card.tsx
â”‚   â”‚       â”‚   â””â”€â”€ progress-bar.tsx
â”‚   â”‚       â”œâ”€â”€ ğŸ“ chat/
â”‚   â”‚       â”‚   â”œâ”€â”€ chat-interface.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ message-bubble.tsx
â”‚   â”‚       â”‚   â””â”€â”€ chat-input.tsx
â”‚   â”‚       â”œâ”€â”€ ğŸ“ calendar/
â”‚   â”‚       â”‚   â”œâ”€â”€ calendar-grid.tsx
â”‚   â”‚       â”‚   â””â”€â”€ event-modal.tsx
â”‚   â”‚       â”œâ”€â”€ ğŸ“ file-explorer/
â”‚   â”‚       â”‚   â”œâ”€â”€ tree-view.tsx
â”‚   â”‚       â”‚   â””â”€â”€ file-item.tsx
â”‚   â”‚       â””â”€â”€ ğŸ“ lab/
â”‚   â”‚           â”œâ”€â”€ source-list.tsx
â”‚   â”‚           â””â”€â”€ workspace.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ lib/
â”‚   â”‚   â”œâ”€â”€ prisma.ts              # Client Prisma
â”‚   â”‚   â”œâ”€â”€ auth.ts                # Config NextAuth
â”‚   â”‚   â”œâ”€â”€ ai.ts                  # Config OpenAI/Vercel AI
â”‚   â”‚   â”œâ”€â”€ # Pas de client séparé (Prisma direct)
â”‚   â”‚   â””â”€â”€ utils.ts               # Helpers (cn, etc.)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”‚   â”œâ”€â”€ use-chat.ts
â”‚   â”‚   â”œâ”€â”€ use-calendar.ts
â”‚   â”‚   â””â”€â”€ use-file-upload.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ stores/                 # Zustand stores
â”‚   â”‚   â”œâ”€â”€ auth-store.ts
â”‚   â”‚   â”œâ”€â”€ chat-store.ts
â”‚   â”‚   â””â”€â”€ ui-store.ts
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ types/
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ user.ts
â”‚       â”œâ”€â”€ course.ts
â”‚       â””â”€â”€ api.ts
â”‚
â”œâ”€â”€ .env.local                     # Variables d'environnement
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.ts
â””â”€â”€ README.md
```

---

## ğŸ” SÃ©curitÃ©

### Authentification
- **NextAuth.js v5** avec stratÃ©gie JWT
- Tokens stockÃ©s en cookies `httpOnly`
- Refresh token automatique

### Autorisation
```typescript
// Middleware de protection des routes
export const config = {
  matcher: ['/student/:path*', '/teacher/:path*', '/admin/:path*']
};

// VÃ©rification du rÃ´le dans chaque route
if (session.user.role !== 'ADMIN') {
  return NextResponse.redirect('/unauthorized');
}
```

### Protection des DonnÃ©es
- Mots de passe hashÃ©s (bcrypt)
- ClÃ©s API chiffrÃ©es en BDD
- HTTPS obligatoire (Vercel)
- Rate limiting sur les endpoints IA

---

## ğŸš€ Environnements

| Environnement | URL | BDD | IA |
|---------------|-----|-----|-----|
| **DÃ©veloppement** | localhost:3000 | Vercel Postgres (dev) | OpenAI (ou Ollama local) |
| **Staging** | staging.blaizbot.app | Vercel Postgres (staging) | OpenAI |
| **Production** | blaizbot.app | Vercel Postgres (prod) | OpenAI |

---

## âœ… Validation

- [ ] L'architecture rÃ©pond-elle Ã  tous les besoins ?
- [ ] Les choix techniques sont-ils cohÃ©rents ?
- [ ] Manque-t-il des composants ?
